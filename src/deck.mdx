import {
  Head,
  Header,
  Footer,
  Steps,
  Notes,
  // Layouts
  Default,
  Invert,
  Split,
  SplitRight,
  Horizontal,
  FullScreenCode,
} from "mdx-deck";
import { themes } from "mdx-deck";
export const theme = {
  ...themes.prism,
  ...myTheme,
};
import "tailwindcss/tailwind.css";
import "./styles/index.css";

import { CodeSurfer, CodeSurferColumns, Step as CodeStep } from "code-surfer";
import {
  nightOwl,
  duotoneDark,
  oceanicNext,
  shadsOfPurple,
  vsDark,
} from "@code-surfer/themes";

import MainContent from "./components/MainContent";
import Grid from "./components/Grid";
import BasicGrid from "./components/BasicGrid";
import GridItem from "./components/GridItem";
import Bullets from "./components/Bullets";
import IframeLoader from "./components/IframeLoader";
import CodeSandboxCharts from "./components/CodeSandboxCharts";
import myTheme from "./theme";
import colors, { colorMap } from "./styles/colors";

<Head>
  <title>React CrashCourse</title>
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@jxnblk" />
  <meta name="twitter:title" content="My Presentation" />
  <meta name="twitter:description" content="A really great presentation" />
  <meta name="twitter:image" content="https://example.com/card.png" />
</Head>
<Header className="Header">React CrashCourse</Header>
<Footer className="Footer">UX Forum (March 2021)- Craig Curtis</Footer>

<!-- PAGE 1 - intro-->

# React CrashCourse

<MainContent>
  <BasicGrid gridAutoFlow="column">
    <Steps>
      <div className="box box-badass p-2 text-center">
        <span>Classes</span>
      </div>
      <div className="box box-badass p-2 text-center">
        <span>Hooks</span>
      </div>
      <div className="box box-uranianBlue p-2 text-center">
        <span>Redux</span>
      </div>
      <div className="box box-uranianBlue p-2 text-center">
        <span>Context</span>
      </div>
      <div className="box box-sandyBrown p-2 text-center">
        <span>Gotchas, Q&A</span>
      </div>
      <div className="box box-sandyBrown p-2 text-center">
        <span>Activity</span>
      </div>
    </Steps>
  </BasicGrid>
</MainContent>

<Notes>

- React CrashCourse
- Go for the basics of React
- Not enough if just do one tutorial
- Need Classes for legacy projects and 3rd party plugins
- Understand Hooks for modern React
- Understand Redux for legacy, and as a state option
- Learn Context as a simpler Redux alternative - old and new
- Common Gotchas

</Notes>

---

<!-- PAGE 2 - React Components example with React + D3-->

# Components Example: React + D3

<CodeSandboxCharts />

<Notes>

- Made with Codesandbox - set up with Create React App
- Everything is a component
- New syntax - HTML in JS, possibly CSS in JS
- Entry point - public.html
- Entry point - index.js (bottom), usually App.js too
- .js, .jsx, .tsx
- Holy Grail layout - prevent header, sidebar flashing

</Notes>

---

<!-- Page 3 - Class-based React -->

# Class-based React

<MainContent>
  <BasicGrid gridAutoFlow="row">
    <Steps>
      <div className="box box-badass p-2 text-center">
        <span>Class structure</span>
      </div>
      <div className="box box-badass p-2 text-center">
        <span>JSX</span>
      </div>
      <div className="box box-badass p-2 text-center">
        <span>Props</span>
      </div>
      <div className="box box-badass p-2 text-center">
        <span>State</span>
      </div>
      <div className="box box-badass p-2 text-center">
        <span>Lifecycle Hooks</span>
      </div>
      <div className="box box-badass p-2 text-center">
        <span>Hoisting State</span>
      </div>
      <div className="box box-badass p-2 text-center">
        <span>HOCs</span>
      </div>
      <div className="box box-badass p-2 text-center">
        <span>refs</span>
      </div>
      <div className="box box-badass p-2 text-center">
        <span>PropTypes, TypeScript</span>
      </div>
    </Steps>
  </BasicGrid>
</MainContent>

---

# Why Classes?

<MainContent>
  <BasicGrid columns={1}>
    <GridItem>Legacy Projects</GridItem>
    <GridItem>3rd Party Plugins</GridItem>
    <GridItem>Still Supported</GridItem>
  </BasicGrid>
</MainContent>

---

# React Class Structure

<CodeSurferColumns themes={[nightOwl,nightOwl]}>

<CodeStep>

```js showNumbers title="./src/App.js"
import React, { Component } from "react";
```

- Import React, Component

</CodeStep>

<CodeStep>

```js showNumbers title="./src/App.js"
import React, { Component } from "react";

class App extends Component {
  constructor(props) {
    super(props);
  }
}

export default App;
```

- Import React, Component
- Create class, add constructor

</CodeStep>

<CodeStep>

```js showNumbers title="./src/App.js"
import React, { Component } from "react";

class App extends Component {
  constructor(props) {
    super(props);
  }

  render() {
    return (
      <div className="App">
        <>
          <h1>My App</h1>
          {/* Comment add more components */}
        </>
      </div>
    );
  }
}

export default App;
```

- Import React, Component
- Create class, add constructor
- render the JSX (notice syntax)

</CodeStep>

<CodeStep>

```js showNumbers title="./src/App.js"
import React, { Component } from "react";

class App extends Component {
  constructor(props) {
    super(props);
  }

  render() {
    return (
      <div className="App">
        <>
          <h1>My App</h1>
          {/* Comment add more components */}
        </>
      </div>
    );
  }
}

export default App;
```

- Import React, Component
- Create class, add constructor
- render the JSX (notice syntax)
- This is setup in CRA, let's look at entry point

</CodeStep>

</CodeSurferColumns>

---

<!-- Page - Classes Entry Point -->

# React Entry Point

<IframeLoader
  src={`https://codesandbox.io/embed/relaxed-chatelet-nnxgj?autoresize=1&codemirror=1&fontsize=14&hidenavigation=1&theme=dark`}
  title={`Basic CRA Template`}
/>

- Notice App.js, slightly different syntax
- Dive into ./src/index.js, connecting to the DOM
- Dive into ./public/index.html, DOM id entry point at #root

---

# JSX

<CodeSurferColumns themes={[nightOwl,nightOwl]}>

<CodeStep>

```js showNumbers title="./src/Header.jsx" 4,11
import React, { Component } from "react";
import styles from "./Header.module.scss";

class Header extends Component {
  constructor(props) {
    super(props);
  }

  render() {
    return (
      <header className={`header ${styles.Header}`}>
        <span>My Title</span>
      </header>
    );
  }
}

export default Header;
```

- className vs. class

</CodeStep>

<CodeStep>

```js showNumbers title="./src/Header.jsx" 12:13
import React, { Component } from "react";
import styles from "./Header.module.scss";

class Header extends Component {
  constructor(props) {
    super(props);
  }

  render() {
    return (
      <header className={`header ${styles.Header}`}>
        <label htmlFor="myInput">Search:</label>
        <input id="myInput" type="text" />
      </header>
    );
  }
}

export default Header;
```

- className vs. class
- htmlFor vs. for

</CodeStep>

<CodeStep>

```js showNumbers title="./src/Header.jsx"
import React, { Component } from "react";
import styles from "./Header.module.scss";

class Header extends Component {
  constructor(props) {
    super(props);
  }

  handleChange(e) {
    console.log(e.target.value);
  }
  clear() {
    alert("cleared");
  }
  handlePlay() {...}

  render() {
    return (
      <header className={`header ${styles.Header}`}>
        <label htmlFor="myInput">Search:</label>
        <input
          id="myInput"
          type="text"
          onChange={(e) => this.handleChange(e)}
        />
        <button onClick={this.clear}>X</button>
        <video
          src={`...`}
          canplay={this.handlePlay}
        />
      </header>
    );
  }
}

export default Header;
```

- className vs. class
- htmlFor vs. for
- on events (check MDN events)

</CodeStep>

<CodeStep>

```js showNumbers title="./src/Header.jsx"
import React, { Component } from "react";
import styles from "./Header.module.scss";

class Header extends Component {
  constructor(props) {
    super(props);
  }

  handleChange(e) {
    console.log(e.target.value);
  }
  clear() {
    alert("cleared");
  }
  handlePlay() {...}

  render() {
    const results = [
      {id: 1, name: 'apple'},
      {id: 2, name: 'banana'},
    ];

    return (
      <header className={`header ${styles.Header}`}>
        <label htmlFor="myInput">Search:</label>
        <input
          id="myInput"
          type="text"
          onChange={(e) => this.handleChange(e)}
        />
        <button onClick={this.clear}>X</button>
        <video
          src={`...`}
          canplay={this.handlePlay}
        />
        <ul>
          {results.map( (result) => {
            return (
              <li key={result.id}>{result.name}</li>
            );
          })}
        </ul>
      </header>
    );
  }
}

export default Header;
```

- className vs. class
- htmlFor vs. for
- on events (check MDN events)
- mapping lists, keys

</CodeStep>

<CodeStep>

```js showNumbers title="./src/Header.jsx"
import React, { Component } from "react";
import styles from "./Header.module.scss";

class Header extends Component {
  constructor(props) {
    super(props);
  }

  handleChange(e) {
    console.log(e.target.value);
  }
  clear() {
    alert("cleared");
  }
  handlePlay() {...}

  render() {
    const results = [
      {id: 1, name: 'apple'},
      {id: 2, name: 'banana'},
    ];

    return (
      <header className={`header ${styles.Header}`}>
        <label htmlFor="myInput">Search:</label>
        <input
          id="myInput"
          type="text"
          onChange={(e) => this.handleChange(e)}
        />
        <button onClick={this.clear}>X</button>
        <video
          src={`...`}
          canplay={this.handlePlay}
        />
        <ul>
          {results.map( result => (
            <li key={result.id}>{result.name}</li>
          ))}
        </ul>
      </header>
    );
  }
}

export default Header;
```

- className vs. class
- htmlFor vs. for
- on events (check MDN events)
- mapping lists, keys
- refined syntax for maps

</CodeStep>

<CodeStep>

```js showNumbers title="./src/Header.jsx" 24:33
import React, { Component } from "react";
import styles from "./Header.module.scss";

class Header extends Component {
  constructor(props) {
    super(props);
  }

  handleChange(e) {
    console.log(e.target.value);
  }
  clear() {
    alert("cleared");
  }
  handlePlay() {...}

  render() {
    const results = [
      {id: 1, name: 'apple'},
      {id: 2, name: 'banana'},
    ];

    return (
      <>
        <header className={`header ${styles.Header}`}>
          ...
        </header>
        <video
          className={`${styles.Video}`}
          src={`...`}
          canplay={this.handlePlay}
        />
      </>
    );
  }
}

export default Header;
```

- className vs. class
- htmlFor vs. for
- on events (check MDN events)
- mapping lists, keys
- refined syntax for maps
- fragments - must be 1 parent wrapper element

</CodeStep>

<CodeStep>

```js showNumbers
import React, { Component } from "react";
import isEmpty from "lodash/isEmpty";
import styles from "./Header.module.scss";

class Header extends Component {
  render() {
    const { results, hasError } = this.props;

    return (
      <>
        {
          isEmpty(results) ? (
            <header>...</header>
          ) : (
            <video>...</video>
          );
        }
        {hasError ? (<Alert type="danger" />) : null}
        {hasSuccess && (<Alert type="success" />")}
      </>
    );
  }
}

export default Header;
```

- className vs. class
- htmlFor vs. for
- on events (check MDN events)
- mapping lists, keys
- refined syntax for maps
- fragments - must be 1 parent wrapper element
- ? () : (), &&, null

</CodeStep>

<CodeStep>

```js showNumbers
...
const newObject = {
  ...oldObject,
  { active: true }
};

const newArray = [
  ...oldArray,
  { id: 100, 'zucchini'}
];
```

- className vs. class
- htmlFor vs. for
- on events (check MDN events)
- mapping lists, keys
- refined syntax for maps
- fragments - must be 1 parent wrapper element
- ? () : (), &&, null
- new objects and arrays with spread syntax ...

</CodeStep>

</CodeSurferColumns>

---

# Props

## What are props?

- Data Down - Data into components
- Events Up - Functions notifying parent components
- Dangers of Prop drilling
- Will tie to Life Cycles and Hooks

---

# Class Props

<CodeSurferColumns themes={[nightOwl,nightOwl]}>

<CodeStep>

```js showNumbers 9:12,16,22:37
import React, { Component } from "react";

class App extends Component {
  constructor(props) {
    super(props);
  }

  render() {
    const results = [
      { id: 1, name: "apple" },
      { id: 2, name: "banana" },
    ];

    return (
      <div>
        <Header title="My App" results={results} />
      </div>
    );
  }
}

class Header extends Component {
  constructor(props) {
    super(props);
  }

  render() {
    return (
      <>
        <header>{this.props.title}</header>
        {this.props.results.map((result) => (
          <p>{result.name}</p>
        ))}
      </>
    );
  }
}

export default App;
```

- data down (title, results)

</CodeStep>

<CodeStep>

```js showNumbers
import React, { Component } from "react";

class App extends Component {
  constructor(props) {
    super(props);
  }

  render() {
    const results = [
      { id: 1, name: "apple" },
      { id: 2, name: "banana" },
    ];

    return (
      <div>
        <Header title="My App" results={results} />
      </div>
    );
  }
}

class Header extends Component {
  constructor(props) {
    super(props);
  }

  render() {
    const { title, results } = this.props;

    return (
      <>
        <header>{title}</header>
        {results.map((result) => (
          <p>{result.name}</p>
        ))}
      </>
    );
  }
}

export default App;
```

- data down (title, results)
- refined destructuring

</CodeStep>

<CodeStep>

```js showNumbers
import React, { Component } from "react";

class App extends Component {
  handleItemClicked(id) {...}
  handleToggleMenu() {...}

  render() {
    ...
    return (
      <div>
        <Header
          ...
          onItemClicked={(id) => this.handleItemClicked(id)}
          onToggleMenu={() => this.handleToggleMenu()}
        />
      </div>
    );
  }
}

class Header extends Component {
  ...
  render() {
    const {
      ...
      onItemClicked,
      onToggleMenu
    } = this.props;

    return (
      <>
        <header>
          ...
          <button onClick={() => onToggleMenu()}>Menu</button>
        </header>
        {results.map((result) => (
          <p onClick={() => onItemClicked(result.id)}>{result.name}</p>
        ))}
      </>
    );
  }
}

export default App;
```

- data down (title, results)
- refined destructuring
- events up, (optional params)

</CodeStep>

<CodeStep>

```js showNumbers title="Prop Drilling"
  {/* App */}
  ...
  render() {
    return (
      <div className="App">
        <HeaderButton isMenuOpen{false} />
      </div>
    );
  }
  ...
  {/* Header */}
  ...
  render() {
    return (
      <header className="Header">
        <HeaderButton isMenuOpen{this.props.isMenuOpen} />
      </header>
    );
  }
  {/* Header Button */}
  ...
  render() {
    return (
      <button className="HeaderButton">
        <HeaderButtonIcon isMenuOpen{this.props.isMenuOpen} />
      </button>
    );
  }
  {/* Header Button Icon */}
  render() {
    return (
      <span className="HeaderButtonIcon">
        {this.props.isMenuOpen ? 'Open' : 'Closed'}
      </span>
    );
  }
```

- data down (title, results)
- refined destructuring
- events up, (optional params)
- Dangers of Prop Drilling (solved with Redux or Context)

</CodeStep>

</CodeSurferColumns>

---

# Class State

## What is State?

- Stores data for a component
- For mutated data
- Retains across renders

---

# Class State Code

<CodeSurferColumns themes={[nightOwl,nightOwl]}>

<CodeStep>

```js showNumbers
class App extends Component {
  constructor(props) {
    super(props);

    state = {
      isMenuOpen: false,
      results: [],
    };
  }
}
```

- Set default in costructor

</CodeStep>

<CodeStep>

```js showNumbers
class App extends Component {
  state = {
    isMenuOpen: false,
    results: [],
  };
}
```

- Set default in costructor
- OR no constructor syntax

</CodeStep>

<CodeStep>

```js showNumbers
class App extends Component {
  state = {
    isMenuOpen: false,
    results: [],
  };

  handleToggleMenu() {
    const { isMenuOpen } = this.state;
    setState({ isMenuOpen: !isMenuOpen });
  }

  setResults(results) {
    setState({ results });
  }
}
```

- Set default in costructor
- OR no constructor syntax
- Change values with setState

</CodeStep>

<CodeStep>

```js showNumbers
class App extends Component {
  state = {
    isMenuOpen: false,
    results: [],
  };

  handleToggleMenu() {
    () => {
      const { isMenuOpen } = this.state;
      setState({ isMenuOpen: !isMenuOpen });
    };
  }

  setResults(results) {
    // prettier-ignore
    setState(() => ({
      results: prevState.isMenuOpen
          ? results
          : prevState.results,
    }));
  }
}
```

- Set default in costructor
- OR no constructor syntax
- Change values with setState
- setState callback (ensure state is changed, since is async)

</CodeStep>

</CodeSurferColumns>

---

# Class Lifecycle Hooks

<BasicGrid columns={3} rows={1}>
  <GridItem>
    <h3>Mounting</h3>
    <ol>
      <li>constructor</li>
      <li>render</li>
      <li>componentDidMount</li>
    </ol>
  </GridItem>
  <GridItem>
    <h3>Updating</h3>
    <ol>
      <li>render</li>
      <li>componentDIdUpdate</li>
    </ol>
  </GridItem>
  <GridItem>
    <h3>Unmounting</h3>
    <ol>
      <li>componentWillUnmount</li>
    </ol>
  </GridItem>
</BasicGrid>

<IframeLoader
  src={`https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/`}
  title={`React Lifecycle Methods`}
/>

---

# componentDidMount

- API Calls
- Animations
- Listeners

---

# Class Lifecycle - componentDidMount

<CodeSurferColumns themes={[nightOwl,nightOwl]}>

<CodeStep>

```js showNumbers
import React, { Component } from 'react';
import isEmpty from 'lodash/isEmpty';

class BookList extends Component {
  state = {
    books: []; // [ {id: number, title: string} ]
    loadState: null; // 'loading', 'success', 'error'
  }

  render() {
    const { books, loadState } = this.state;
    return (
      <></>
    );
  }
}
```

<div>

## API Calls, Animations

- Set up basic component

</div>

</CodeStep>

<CodeStep>

```js showNumbers
import React, { Component } from 'react';
import isEmpty from 'lodash/isEmpty';

class BookList extends Component {
  state = {
    books: []; // [ {id: number, title: string} ]
    loadState: null; // 'loading', 'success', 'error'
  }

  componentDidMount() {
    cosnt { bookListId } = this.props;

    this.setState({loadState: 'loading'});

    fetch(`https://api.com/${bookListId}`)
      .then(res => res.json())
      .then(data => this.setState({ books: data, loadState: 'success' }))
      .catch(error => {
        console.error(error);
        this.setState({ loadState: 'error' })
      })
  }

  render() {
    const { books, loadState } = this.state;
    return (
      <></>
    );
  }
}
```

<div>

## API Calls, Animations

- Set up basic component
- Add componentDidMount method

</div>

</CodeStep>

<CodeStep>

```js showNumbers
import React, { Component } from 'react';
import isEmpty from 'lodash/isEmpty';

class BookList extends Component {
  state = {
    books: []; // [ {id: number, title: string} ]
    loadState: null; // 'loading', 'success', 'error'
  }

  async componentDidMount() {
    cosnt { bookListId } = this.props;

    this.setState({loadState: 'loading'});

    try {
      const booksRes = await fetch(`https://api.com/${bookListId}`);
      const books = await booksRes.json();
      this.setState({ books, loadState: 'success'});
    } catch(error) {
      console.error(error);
      this.setState({ loadState: 'error' });
    }

  }

  render() {
    const { books, loadState } = this.state;
    return (
      <></>
    );
  }
}
```

<div>

## API Calls, Animations

- Set up basic component
- Add componentDidMount method
- Refine with async await

</div>

</CodeStep>

<CodeStep>

```js showNumbers
import React, { Component } from 'react';
import isEmpty from 'lodash/isEmpty';
import styles from './BookList.module.scss';

class BookList extends Component {
  state = {
    books: []; // [ {id: number, title: string} ]
    loadState: null; // 'loading', 'success', 'error'
  }

  async componentDidMount() {
    cosnt { bookListId } = this.props;

    this.setState({loadState: 'loading'});

    try {
      const booksRes = await fetch(`https://api.com/${bookListId}`);
      const books = await booksRes.json();
      this.setState({ books, loadState: 'success'});
    } catch(error) {
      console.error(error);
      this.setState({ loadState: 'error' });
    }

  }

  render() {
    const { books, loadState } = this.state;
    return (
      <>
        {switch(true) {
          case loadState === 'loading':
            return (<div className={styles.Loading} />);
          case loadState === 'error':
            return (<div className={styles.Error}>Error</div>);
          case loadState === 'success' && !isEmpty(books):
            return (
              <div className={styles.BookList}>
                {books.map( b => (
                  <div className={styles.Book}>...</div>
                ))}
              </div>
            );
          case loadState === 'success' && isEmpty(books):
          default:
            return (<div className={styles.Placeholder} />)
        }}
      </>
    );
  }
}
```

<div>

## API Calls, Animations

- Set up basic component
- Add componentDidMount method
- Refine with async await
- Add the JSX

</div>

</CodeStep>

</CodeSurferColumns>

---

# componentDidUpdate

<Horizontal>

- watch props changes
- watch state changes
- not called on initial render

</Horizontal>

---

# Class Lifecycle - componentDidUpdate

<CodeSurferColumns themes={[nightOwl,nightOwl]}>

<CodeStep>

```js showNumbers
import React, { Component } from "react";

class BookList extends Component {
  componentDidMount() {
    console.log(this.props.isAuthenticated);
    {/* API call */}
  };
  render() { return ...};
}

```

- Assume isAuthenticated is a prop passed in...

</CodeStep>

<CodeStep>

```js showNumbers
import React, { Component } from "react";

class BookList extends Component {
  componentDidMount() { {/* API call */} };

  componentDidUpdate(prevProps, prevState) {
    const { isAuthenticated } = this.props;
    const wasAuthenticated = prevProps.isAuthenticated;

    if (wasAuthenticated && !isAuthenticated) {
      this.removeData();
    }
    if (!wasAuthenticated && isAuthenticated) {
      this.loadData();
    }
  }

  render() { return ...};
}

```

- Assume isAuthenticated is a prop passed in... want to hide books if false
- use compoonentDidUpdate to watch for props or state changes

</CodeStep>

</CodeSurferColumns>

<Notes>

- test notes

</Notes>

---

# componentWillUnmount

<Horizontal>

- Cleanup functions
- Clearing intervals, timeouts
- Removing event listeners

</Horizontal>

---

# Class Lifecycle - componentWillUnmount

<CodeSurferColumns themes={[nightOwl,nightOwl]}>

<CodeStep>

```js showNumbers
class Chart extends Component {
  componentDidMount() {
    this.loadChart();
  }
  componentDIdUpdate() {
    this.updateChart();
  }
}
```

- Used for cleanup functions

</CodeStep>

<CodeStep>

```js showNumbers
class Chart extends Component {
  componentDidMount() {
    this.loadChart();
  }
  componentDIdUpdate() {
    this.updateChart();
  }
  componentWillUnmount() {
    this.destroyChart();
  }
}
```

- Used for cleanup functions

</CodeStep>

<CodeStep>

```js showNumbers
class Chart extends Component {
  private _interval: number = null;

  componentDidMount() { //
    this._interval = window.setInterval(() => {
      this.pingServer();
    }, 60000);
  }

  componentWillUnmount() { //
    window.clearInterval(this._interval);
  }
}
```

- Used for cleanup functions
- and clearing intervals, timeouts

</CodeStep>

<CodeStep>

```js showNumbers
class WindowEventWrapper extends Component {
  componentDidMount() {
    window.addEventListener("blur", this.onWindowBlurred);
    window.addEventListener("focus", this.onWindowFocused);
  }

  componentWillUnmount() {
    window.removeEventListener("blur", this.onWindowBlurred);
    window.removeEventListener("focus", this.onWindowFocused);
  }
}
```

- Used for cleanup functions
- and clearing intervals, timeouts
- and event listeners

</CodeStep>

</CodeSurferColumns>

---

# Hoisting State + Functional Components

<Horizontal>

- Hoisting up state to parent components
- Child components are Functional components, not Classes
- Function components had no state (prior to React v.16.8)

</Horizontal>

---

# Hoisting State + Functional Components

<CodeSurferColumns themes={[nightOwl,nightOwl]}>

<CodeStep>

```js showNumbers
class App extends Component {
  state = {
    isDarkMode: false,
  };

  render() {
    return (
      <div>
        <UserSettings />
      </div>
    );
  }
}
```

- Common to have state in App.js for small projects

</CodeStep>

<CodeStep>

```js showNumbers
class App extends Component {
  state = {
    isDarkMode: false,
  };
  handleToggleDarkMode() {
    const { isDarkMode } = this.state;
    this.setState({ isDarkMode: !isDarkMode });
  }

  render() {
    const { isDarkMode } = this.state;
    return (
      <div>
        <UserSettings
          isDarkMode={isDarkMode}
          onToggleDarkMode={this.handleToggleDarkMode}
        />
      </div>
    );
  }
}

<!-- prettier-ignore -->
const UserSettings = ({
  isDarkMode = false,
  onToggleDarkMode,
}) => (
  <div className={
    `${styles.UserSettings} ${isDarkMode ? "isDarkMode" : ""}`
  }>
    <button onClick={() => onToggleDarkMode()}>...</button>
  </div>
);
```

- Common to have state in App.js for small projects
- Child components are typically functional components / dumb components (notice syntax)

</CodeStep>

<CodeStep>

```js showNumbers
class App extends Component {
  state = {
    books: null,
  };

  render() {
    const { books } = this.state;
    return (
      <div>
        <BookList books={books} />
      </div>
    );
  }
}

const BookList = ({ books=[] }) => {
  if (isEmpty(books)) return null;
  const sortedBooks = books.sort( (a,b) -> b.date - a.date );

  return (
    <ul>
      {sortedBooks.map( b => (
        <li key={b.id}>{b.title} - {b.date}</li>
      ))}
    </ul>
  );
}
```

- Common to have state in App.js for small projects
- Child components are typically functional components / dumb components (notice syntax)
- Logic can be handled before returns

</CodeStep>

</CodeSurferColumns>

---

# HOCs - Higher Order Components

<Horizontal>

- HOC = a function that takes a component and returns a new component
- React Router withRouter()
- Redux connect()()
- React Soundplayer withCustomAudio()
- Material UI withStyles()

</Horizontal>

---

# HOCs - Higher Order Components

<CodeSurferColumns themes={[nightOwl,nightOwl]}>

<CodeStep>

```js showNumbers
import React from "react";
import { withRouter } from "react-router";

class ShowTheLocation extends React.Component {
  render() {
    const { match, location, history } = this.props;

    return (
      <div>
        <span>You are now at&#32;</span>
        <span>{location.pathname}</span>
      </div>
    );
  }
}

const ShowTheLocationWithRouter = withRouter(ShowTheLocation);
```

- withRouter in React Router

</CodeStep>

<CodeStep>

```js showNumbers
import { connect } from "react-redux";
import isEmpty from 'lodash/isEmpty';
class MyComponent extends Component {
  render() {
    const { isDarkMode, users, onUserClicked } = this.props; // from store
    return (
      <div className={`${isDarkMode ? 'dark' : ''}`}>
        {!isEmpty(users) && (
          <ul>
            {users.map( u => (
              <li
                key={u.id}
                onClick={() => onUserClicked(u.id)}
              >
                {u.name}
              </li>
            ))}
          </ul>
        )}
      </div>
    );
  }
}

const mapStateToProps = (store) => {
  isDarkMode: store.isDarkMode,
  users: store.users,
};

const mapDispatchToProps = dispatch => ({
  onUserClicked: (id) => dispatch({ type: 'USER_CLICKED', value: id})
});

const ConnectedMyComponent = connect(
  mapStateToProps,
  mapDispatchToProps
)(MyComponent);
export default ConnectedMyComponent;
```

- withRouter in React Router
- connect function in Redux

</CodeStep>

<CodeStep>

```js showNumbers
...
class WrappedComponent extends Component {...}

export default withRouter
  (connect(
    mapStateToProps,
    mapDispatchToProps
  )(WrappedComponent)
);
```

- withRouter in React Router
- connect function in Redux
- OR both React Router and Redux

</CodeStep>

<CodeStep>

```js showNumbers
import React, { Component } from "react";
import {
  PlayButton,
  Timer,
  Progress,
  VolumeControl,
} from "react-soundplayer/components";
import { withCustomAudio } from "react-soundplayer/addons";

interface ICustomAudioPlayerProps {
  onCanPlayTrack: (time: number) => {};
  onStartTrack: () => {};
  onPauseTrack: () => {};
  onStopTrack: () => {};
  currentTime: number;
  duration: number;
  hasSetStartTime: boolean;
  isMuted: boolean;
  playing: boolean;
  preloadType: string;
  seeking: boolean;
  soundCloudAudio: any;
  streamUrl: string;
  volume: number;
  jumpToTime: number;
}

class CustomAudioPlayer extends Component<ICustomAudioPlayerProps, {}> {
  render() {
    return (
      <div className={`${styles.CustomAudioPlayer}`}>
        <PlayButton {...this.props} />
        <Timer {...this.props} />
        <Progres {...this.props} />
        <VolumeControl {...this.props} />
      </div>
    );
  }
}

const CustomAudioPlayer = withCustomAudio(InnerCustomAudioPlayer);
export default CustomAudioPlayer;
```

- withRouter in React Router
- connect function in Redux
- OR both React Router and Redux
- react-soundplayer

</CodeStep>

<CodeStep>

```js showNumbers
import React from "react";
import PropTypes from "prop-types";
import { withStyles } from "@material-ui/core/styles";
import Button from "@material-ui/core/Button";

const styles = {
  root: {
    background: "linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",
    border: 0,
    borderRadius: 3,
    boxShadow: "0 3px 5px 2px rgba(255, 105, 135, .3)",
    color: "white",
    height: 48,
    padding: "0 30px",
  },
};

function HigherOrderComponent(props) {
  const { classes } = props;
  return <Button className={classes.root}>Higher-order component</Button>;
}

HigherOrderComponent.propTypes = {
  classes: PropTypes.object.isRequired,
};

export default withStyles(styles)(HigherOrderComponent);
```

- withRouter in React Router
- connect function in Redux
- OR both React Router and Redux
- react-soundplayer
- material-ui withStyles

</CodeStep>

</CodeSurferColumns>

---

# refs

<Horizontal>

- For DOM manipulation - focus/blur, media events
- For storing values
- Do not overuse refs

</Horizontal>

---

# Class refs

<CodeSurferColumns themes={[nightOwl,nightOwl]}>

<CodeStep>

```js showNumbers
import React, { Component } from "react";

class CustomTextInput extends React.Component {
  constructor(props) {
    super(props);
  }

  render() {
    return (
      <div>
        <input type="text" />
        <button>
          Focus the text input
        </button
      </div>
    );
  }
}

export default CustomTextInput;
```

- Start with simple component

</CodeStep>

<CodeStep>

```js showNumbers
import React, { Component } from "react";

class CustomTextInput extends React.Component {
  constructor(props) {
    super(props);
    this.textInput = React.createRef();
    this.focusTextInput = this.focusTextInput.bind(this);
  }

  focusTextInput() {
    this.textInput.current.focus();
  }

  render() {
    return (
      <div>
        <input
          type="text"
          ref={this.textInput} />
        <button
          onClick={this.focusTextInput}
        >
          Focus the text input
        </button
      </div>
    );
  }
}

export default CustomTextInput;
```

- Start with simple component
- Create ref in constructor, add ref to DOM element

</CodeStep>

<CodeStep>

```js showNumbers
import React, { Component } from "react";

class CustomTextInput extends Component {
  _textInput = React.createRef();

  focusTextInput() {
    this._textInput.current.focus();
  }

  render() {
    return (
      <div>
        <input type="text" ref={this._textInput} />
        <button onClick={() => this.focusTextInput()}>
          Focus the text input
        </button>
      </div>
    );
  }
}

export default CustomTextInput;
```

- Start with simple component
- Create ref in constructor, add ref to DOM element
- Refine with constructorless syntax

</CodeStep>

<CodeStep>

```js showNumbers
import React, { Component } from "react";

class CustomTextInput extends Component {
  focusTextInput() {
    this._textInput.current.focus();
  }

  render() {
    return (
      <div>
        <input type="text" ref={(node) => (this._textInput = node)} />
        <button onClick={() => this.focusTextInput()}>
          Focus the text input
        </button>
      </div>
    );
  }
}

export default CustomTextInput;
```

- Start with simple component
- Create ref in constructor, add ref to DOM element
- Refine with constructorless syntax
- Other common syntax for refs - no createRef

</CodeStep>

<CodeStep>

```js showNumbers
const Input = ({ inputRef }) => {
  return <input type="text" ref={inputRef} />;
};

class App extends Component {
  state = {
    value: "",
  };

  handleSubmit = (event) => {
    e.preventDefault();
    this.setState({ value: this._input.value });
  };

  render() {
    const { value } = this.state;
    return (
      <div>
        <h3>Value: {value}</h3>
        <Input inputRef={(node) => (_input = node)} />
        <button onClick={(e) => this.handleSubmit(e)}>Submit</button>
      </div>
    );
  }
}
```

- Start with simple component
- Create ref in constructor, add ref to DOM element
- Refine with constructorless syntax
- Other common syntax for refs - no createRef
- Passing refs

</CodeStep>

</CodeSurferColumns>

---

# Class PropTypes and TypeScript

<Horizontal>

- PropTypes in many 3rd party libs, no tsx
- TSX as the standard

</Horizontal>

---

# Class PropTypes and TypeScript Example

<CodeSurferColumns themes={[nightOwl,nightOwl]}>

<CodeStep>

```js showNumbers title="BookList.jsx"
import React, { Component } from "react";

class BookList extends Component {
  render() {
    const { isDarkMode, title, books, icon } = this.props;

    return <div>...</div>;
  }
}

export default BookList;
```

- Start with a class

</CodeStep>

<CodeStep>

```js showNumbers title="BookList.jsx"
import React, { Component } from "react";
import PropTypes from "prop-types";

class BookList extends Component {
  render() {
    const { isDarkMode, pageTitle, books, icon, onIconClicked } = this.props;

    return <div>...</div>;
  }
}

BookList.propTypes = {
  isDarkMode: PropTypes.bool,
  pageTitle: PropTypes.string,
  books: PropTypes.arrayOf(
    PropTypes.shape({
      title: PropTypes.string,
      date: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),
    })
  ),
  icon: PropTypes.elementType,
  onIconClicked: PropTypes.func,
};

export default BookList;
```

- Start with a class
- Define shapes of props

</CodeStep>

<CodeStep>

```js showNumbers title="BookList.tsx"
import React, { Component, ReactNode } from "react";

interface IBook {
  title: string;
  date: string | number;
}

interface IBookListProps {
  isDarkMode: boolean;
  pageTitle: string;
  books: IBook;
  icon: ReactNode;
  onIconClicked: () => void;
}

interface IBookListState {
  showAnimation: boolean;
}

class BookList extends Component<IBookListProps, IBookListState> {
  state = {
    showAnimation: false,
  };

  handleIconClicked(): void {
    const { showAnimation } = this.state;
    this.setState(() => ({ showAnimation: !showAnimation }));
  }

  render() {
    const { isDarkMode, pageTitle, books, icon, onIconClicked } = this.props;

    return <div>...</div>;
  }
}

export default BookList;
```

- Start with a class
- Define shapes of props
- Convert to TypeScript

</CodeStep>

</CodeSurferColumns>

---

<!-- Page - React Hooks -->

# React Hooks

<MainContent>
  <BasicGrid gridAutoFlow="row">
    <Steps>
      <div className="box box-badass p-2 text-center">
        <span>Functional components</span>
      </div>
      <div className="box box-badass p-2 text-center">
        <span>useState</span>
      </div>
      <div className="box box-badass p-2 text-center">
        <span>useEffect</span>
      </div>
      <div className="box box-badass p-2 text-center">
        <span>useCallback</span>
      </div>
      <div className="box box-badass p-2 text-center">
        <span>useMemo</span>
      </div>
      <div className="box box-badass p-2 text-center">
        <span>useRef</span>
      </div>
      <div className="box box-badass p-2 text-center">
        <span>useMyHook</span>
      </div>
      <div className="box box-badass p-2 text-center">
        <span>Mini Redux - useContext, useReducer</span>
      </div>
      <div className="box box-badass p-2 text-center">
        <span>3rd Party Hooks</span>
      </div>
    </Steps>
  </BasicGrid>
</MainContent>

---

# React Hooks Example

<IframeLoader
  src={`https://codesandbox.io/embed/framer-motion-2-animating-shared-layouts-1cpd0?fontsize=14&hidenavigation=1&theme=dark`}
  title={`Hooks example`}
/>

- useState, destructuring value and setter
- define functions before return
- !passingValue ? passInFn : (val) => myFn(val)

---

<!-- Page - Redux -->

# Redux

<MainContent maxWidth={"100%"}>
  <BasicGrid gridAutoFlow="row">
    <Steps>
      <div className="box box-uranianBlue p-2 text-center">
        <span>connect()</span>
      </div>
      <div className="box box-uranianBlue p-2 text-center">
        <span>mapStateToProps</span>
      </div>
      <div className="box box-uranianBlue p-2 text-center">
        <span>mapDispatchToProps</span>
      </div>
      <div className="box box-uranianBlue p-2 text-center">
        <span>Actions</span>
      </div>
      <div className="box box-uranianBlue p-2 text-center">
        <span>Thunks</span>
      </div>
      <div className="box box-uranianBlue p-2 text-center">
        <span>Redux Dev Tools</span>
      </div>
    </Steps>
  </BasicGrid>
</MainContent>

---

# Context - Mini Redux

<MainContent>
  <BasicGrid gridAutoFlow="row">
    <Steps>
      <div className="box box-uranianBlue p-2 text-center">
        <span>Class Context</span>
      </div>
      <div className="box box-uranianBlue p-2 text-center">
        <span>Hooks Context</span>
      </div>
      <div className="box box-uranianBlue p-2 text-center">
        <span>Mini Redux Context</span>
      </div>
    </Steps>
  </BasicGrid>
</MainContent>

---

# Class Context Example

<IframeLoader
  src={"https://d6jtdo9jhz4ae.cloudfront.net/"}
  title={"CCC Taft Guided Pathways"}
/>

---

# Gotchas, Q&A

<MainContent>
  <BasicGrid gridAutoFlow="row">
    <Steps>
      <div className="box box-sandyBrown p-2 text-center">
        <span>.map, key</span>
      </div>
      <div className="box box-sandyBrown p-2 text-center">
        <span>htmlFor</span>
      </div>
      <div className="box box-sandyBrown p-2 text-center">
        <span>props drilling</span>
      </div>
      <div className="box box-sandyBrown p-2 text-center">
        <span>Mini Redux Context</span>
      </div>
    </Steps>
  </BasicGrid>
</MainContent>

---

# Activity - gather.town

<Split>

<div>
  <video autoPlay controls style={{ width: "100%", height: "100%" }}>
    <source
      src={`https://gather.town/images/site/landing_demo.mp4`}
      type="video/mp4"
    />
  </video>
</div>

<div>
  <p>
    Room:{" "}
    <a
      href="https://gather.town/app/IxOEh5iBhXwxdTWg/ux-forum-react"
      target="_blank"
    >
      Gather.town ux-forum-react
    </a>
  </p>
  <p>Password: uxforumreact</p>
</div>

</Split>

<Notes>

- Class, Hooks, Redux, Context
- Volunteers, find a space
- 2 minutes per Room
- Last 2 minutes, free-for-all, see what happens
- End - meet in Conference Room

</Notes>

---

# Fin

<MainContent>
  <BasicGrid columns={1}>
    <GridItem className="box box-badass p-2 text-center">Questions?</GridItem>
  </BasicGrid>
</MainContent>
